<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghi chú môn {{ course.name if course else 'Môn học' }} - Trợ lý học tập UMT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/heroicons/2.0.18/24/outline/heroicons.min.css" rel="stylesheet">
    <style>
<<<<<<< HEAD
        body { font-family: 'Inter', sans-serif; }
        /* Thêm CSS cho trình soạn thảo WYSIWYG nếu cần */
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-8">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-3xl font-bold text-blue-700">Ghi chú cho môn: {{ course.name if course else "Không rõ" }}</h1>
                <p class="text-gray-600">Mã môn: {{ course.id if course else "N/A" }}</p>
            </div>
            <a href="{{ url_for('dashboard') }}" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
                </svg>
                Quay lại Dashboard
            </a>
        </div>

        <div class="bg-white p-8 rounded-xl shadow-lg">
            <div class="mb-6">
                <h2 class="text-xl font-semibold text-gray-700 mb-3">Chọn mẫu ghi chú (Template)</h2>
                <div class="flex space-x-3">
                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-colors">Cornell Notes</button>
                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-colors">Outline Method</button>
                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-colors">Charting Method</button>
                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-colors">Trang trống</button>
                </div>
                <p class="text-sm text-gray-500 mt-2">
                    Gợi ý: Chọn một mẫu phù hợp để cấu trúc thông tin, tạo liên kết (Associations) và hỗ trợ Chủ động gợi nhớ (Active Recall).
=======
        /* CSS tùy chỉnh cho trang ghi chú */
        body { font-family: 'Inter', sans-serif; }
        /* CSS cơ bản cho trình soạn thảo WYSIWYG (có thể mở rộng) */
        .editor-toolbar button {
            background-color: #f3f4f6; /* Tailwind gray-100 */
            border: 1px solid #d1d5db; /* Tailwind gray-300 */
            padding: 0.5rem 0.75rem; /* Đệm nút */
            margin-right: 0.25rem; /* Khoảng cách giữa các nút */
            border-radius: 0.375rem; /* Bo góc nút (rounded-md) */
            cursor: pointer;
        }
        .editor-toolbar button:hover {
            background-color: #e5e7eb; /* Tailwind gray-200 khi hover */
        }
        #note-content-area { /* Khu vực nội dung ghi chú */
            min-height: 300px; /* Chiều cao tối thiểu */
            border: 1px solid #d1d5db; /* Viền */
            padding: 1rem; /* Đệm bên trong */
            border-radius: 0.375rem; /* Bo góc (rounded-md) */
            background-color: white; /* Màu nền */
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-6 md:p-8">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8">
            <div>
                <h1 class="text-2xl md:text-3xl font-bold text-blue-700">Ghi chú cho môn: {{ course.name if course else "Không rõ" }}</h1>
                <p class="text-gray-600">Mã môn: {{ course.id if course else "N/A" }}</p>
            </div>
            <a href="{{ url_for('student_dashboard') }}" class="mt-4 sm:mt-0 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center self-start sm:self-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
                </svg>
                Quay lại Bảng điều khiển
            </a>
        </div>

        <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
            <div class="mb-6">
                <h2 class="text-xl font-semibold text-gray-700 mb-3">Chọn mẫu ghi chú (Template)</h2>
                <div class="flex flex-wrap gap-2">
                    <button data-template="cornell" class="template-btn bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-colors">Cornell Notes</button>
                    <button data-template="outline" class="template-btn bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-colors">Outline Method</button>
                    <button data-template="charting" class="template-btn bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-colors">Charting Method</button>
                    <button data-template="blank" class="template-btn bg-blue-100 hover:bg-blue-200 text-blue-700 py-2 px-4 rounded-lg transition-colors">Trang trống</button>
                </div>
                <p class="text-sm text-gray-500 mt-2">
                    Gợi ý: Chọn một mẫu phù hợp để cấu trúc thông tin và hỗ trợ học tập hiệu quả.
>>>>>>> test1
                </p>
            </div>

            <div>
                <h2 class="text-xl font-semibold text-gray-700 mb-3">Nội dung ghi chú</h2>
<<<<<<< HEAD
                <div class="border border-gray-300 rounded-lg p-4 min-h-[300px] bg-gray-50">
                    <p class="text-gray-400">Đây là nơi bạn sẽ soạn thảo ghi chú. Trong tương lai, đây sẽ là một trình soạn thảo WYSIWYG (What You See Is What You Get) với các công cụ định dạng, chèn hình ảnh, v.v.</p>
                    <div class="mt-4 p-3 border border-dashed border-blue-300 rounded">
                        <h4 class="font-semibold text-blue-600">Ví dụ: Cornell Notes Layout</h4>
                        <div class="grid grid-cols-3 gap-2 mt-2">
                            <div class="col-span-2 border-r pr-2">
                                <p class="text-sm font-medium text-gray-700">Khu vực ghi chú chính (Notes)</p>
                                <textarea class="w-full h-24 p-1 border rounded text-sm" placeholder="Ghi chép bài giảng, ý chính..."></textarea>
                            </div>
                            <div class="col-span-1">
                                <p class="text-sm font-medium text-gray-700">Từ khóa/Câu hỏi (Cues)</p>
                                <textarea class="w-full h-24 p-1 border rounded text-sm" placeholder="Từ khóa, câu hỏi gợi nhớ..."></textarea>
                            </div>
                        </div>
                        <div class="mt-2 border-t pt-2">
                             <p class="text-sm font-medium text-gray-700">Tóm tắt (Summary)</p>
                             <textarea class="w-full h-16 p-1 border rounded text-sm" placeholder="Tóm tắt nội dung chính sau buổi học..."></textarea>
                        </div>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Hủy</button>
                    <button class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Lưu ghi chú</button>
=======
                <div class="editor-toolbar mb-2">
                    <button onclick="formatDoc('bold');" title="In đậm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.691V5.25a2.25 2.25 0 00-2.25-2.25H5.25a2.25 2.25 0 00-2.25 2.25v4.992m14.006 0v4.992a2.25 2.25 0 01-2.25 2.25H5.25a2.25 2.25 0 01-2.25-2.25v-4.992" /></svg></button>
                    <button onclick="formatDoc('italic');" title="In nghiêng"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" /></svg></button>
                    <button onclick="formatDoc('underline');" title="Gạch chân"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" /></svg></button>
                    <button onclick="formatDoc('insertUnorderedList');" title="Danh sách gạch đầu dòng"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h7.5M3.75 6.75h.007v.008H3.75V6.75zm.375 0a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM3.75 12h.007v.008H3.75V12zm.375 0a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM3.75 17.25h.007v.008H3.75v-.008zm.375 0a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg></button>
                </div>
                <div id="note-content-area" contenteditable="true" class="bg-gray-50">
                    <p>Bắt đầu ghi chú của bạn ở đây...</p>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Hủy</button>
                    <button id="save-note-button" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Lưu ghi chú</button>
>>>>>>> test1
                </div>
            </div>
        </div>

        <footer class="text-center mt-12 text-sm text-gray-500">
<<<<<<< HEAD
            <p>&copy; 2025 UMT Learning Assistant. Phát triển dựa trên ý tưởng của sinh viên UMT.</p>
        </footer>
    </div>
</body>
</html>
```

**Cách chạy ứng dụng (hướng dẫn cho bạn):**

1.  **Lưu các tệp:**
    * Tạo một thư mục cho dự án, ví dụ `UMT_Assistant`.
    * Bên trong `UMT_Assistant`, tạo một tệp tên là `app.py` và dán mã Python vào đó.
    * Tạo một thư mục con tên là `templates` bên trong `UMT_Assistant`.
    * Bên trong thư mục `templates`, tạo tệp `index.html` và `notes_template.html`, rồi dán mã HTML tương ứng vào.

2.  **Cài đặt Flask:**
    Nếu bạn chưa cài đặt Flask, mở terminal hoặc command prompt và chạy:
    `pip install Flask`

3.  **Chạy ứng dụng:**
    * Mở terminal hoặc command prompt, điều hướng đến thư mục `UMT_Assistant`.
    * Chạy lệnh: `python app.py`
    * Mở trình duyệt web và truy cập vào địa chỉ `http://127.0.0.1:5000/`.

**Giải thích mã:**

* **`app.py` (Python - Flask):**
    * Khởi tạo một ứng dụng Flask.
    * Định nghĩa các *route* (đường dẫn URL). Hiện tại có route cho trang chính (`/`) và trang ghi chú ví dụ (`/notes/<course_id>`).
    * Sử dụng `render_template` để hiển thị các tệp HTML, truyền dữ liệu (ví dụ: thông tin người dùng, danh sách môn học) vào template.
    * Dữ liệu hiện tại đang là *hardcoded* (nhúng trực tiếp vào mã). Trong một ứng dụng thực tế, dữ liệu này sẽ đến từ cơ sở dữ liệu, API của Canvas/SIS, v.v.

* **`index.html` (HTML - Trang chính):**
    * Sử dụng Tailwind CSS để tạo kiểu nhanh chóng và hiện đại.
    * Có một thanh điều hướng (sidebar) bên trái và khu vực nội dung chính.
    * Sử dụng JavaScript đơn giản để chuyển đổi giữa các "tab" hoặc "section" nội dung (Bảng điều khiển, Môn học, Ôn tập, v.v.) mà không cần tải lại trang.
    * Hiển thị các placeholder cho các tính năng chính bạn đã mô tả. Ví dụ: "Kết nối với SIS để hiển thị lịch học...", "Tạo và ôn tập flashcards...".
    * Sử dụng cú pháp template của Flask (ví dụ: `{{ user.name }}`) để hiển thị dữ liệu được truyền từ `app.py`.

* **`notes_template.html` (HTML - Trang ghi chú):**
    * Một trang mẫu đơn giản để xem/tạo ghi chú cho một môn học cụ thể.
    * Có placeholder cho việc chọn template ghi chú (Cornell, Outline, etc.) và một khu vực soạn thảo.
    * Ví dụ về cấu trúc HTML cơ bản cho Cornell Notes được thêm vào để minh họa.

**Những bước tiếp theo và lưu ý quan trọng:**

1.  **Cơ sở dữ liệu:** Bạn cần thiết kế và tích hợp một cơ sở dữ liệu (ví dụ: SQLite, PostgreSQL, MongoDB) để lưu trữ thông tin người dùng, môn học, ghi chú, lịch ôn tập, v.v.
2.  **Xác thực người dùng:** Triển khai hệ thống đăng nhập, đăng ký an toàn.
3.  **Kết nối API:** Đây là phần phức tạp. Bạn cần tìm hiểu API của Canvas và SIS (nếu có và được phép truy cập) để tự động hóa việc lấy thời khóa biểu, danh sách môn học.
4.  **Tính năng ghi chú:**
    * Xây dựng trình soạn thảo WYSIWYG (What You See Is What You Get) phong phú hơn.
    * Triển khai logic lưu trữ và truy xuất ghi chú từ cơ sở dữ liệu.
    * Phát triển các template ghi chú khoa học.
5.  **Tính năng ôn tập thông minh:**
    * **Spaced Repetition:** Triển khai thuật toán để tính toán thời điểm ôn tập tối ưu.
    * **Active Recall:** Xây dựng giao diện cho flashcards, quizzing, blurting.
6.  **Số hóa tài liệu:** Tích hợp thư viện OCR (Optical Character Recognition) nếu muốn trích xuất văn bản từ ảnh.
7.  **Giao diện người dùng (UI) và Trải nghiệm người dùng (UX):** Liên tục cải thiện để ứng dụng thân thiện và dễ sử dụng.
8.  **Triển khai (Deployment):** Sau khi phát triển, bạn cần triển khai ứng dụng lên một máy chủ để sinh viên có thể truy cập.

Đây là một khởi đầu. Mỗi tính năng bạn mô tả đều có thể coi là một module nhỏ cần được phát triển riêng. Nếu bạn có bất kỳ câu hỏi nào hoặc muốn tập trung vào một phần cụ thể nào trước, hãy cho tôi biết nhé! Chúng ta có thể đi sâu hơn vào thiết kế và code cho từng ph
=======
            <p>&copy; <span id="current-year-footer">2025</span> UMT Learning Assistant. Phát triển dựa trên ý tưởng của sinh viên UMT.</p>
        </footer>
    </div>
    <script>
        // Hàm thực thi lệnh định dạng văn bản
        function formatDoc(command, value = null) {
            document.execCommand(command, false, value);
            document.getElementById('note-content-area').focus(); // Giữ focus vào vùng soạn thảo
        }

        const saveNoteButton = document.getElementById('save-note-button');
        const noteContentArea = document.getElementById('note-content-area');
        // Lấy course ID từ template Flask (đảm bảo an toàn khi render)
        const courseId = "{{ course.id | e if course else 'unknown_course' }}"; 

        // Tải ghi chú đã lưu từ localStorage nếu có
        if (localStorage.getItem(`note_${courseId}`)) {
            noteContentArea.innerHTML = localStorage.getItem(`note_${courseId}`);
        }

        // Sự kiện click cho nút Lưu ghi chú
        saveNoteButton.addEventListener('click', () => {
            const noteContent = noteContentArea.innerHTML; // Lưu nội dung dưới dạng HTML
            localStorage.setItem(`note_${courseId}`, noteContent);
            alert('Ghi chú đã được lưu vào trình duyệt!');
            // Trong ứng dụng thực tế, bạn sẽ gửi `noteContent` lên server để lưu vào database.
            // Ví dụ: fetch('/student/save_note', { 
            //          method: 'POST', 
            //          headers: {'Content-Type': 'application/json'},
            //          body: JSON.stringify({ course_id: courseId, content: noteContent }) 
            //      });
        });

        // Xử lý chọn template
        const templateButtons = document.querySelectorAll('.template-btn');
        templateButtons.forEach(button => {
            button.addEventListener('click', function() {
                const templateType = this.dataset.template;
                applyTemplate(templateType);
                // Cập nhật trạng thái active cho nút template
                templateButtons.forEach(btn => {
                    btn.classList.remove('bg-blue-500', 'text-white', 'border-blue-500');
                    btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                     if(btn.dataset.template === 'blank' && templateType !== 'blank'){
                        btn.classList.remove('bg-blue-100', 'text-blue-700', 'hover:bg-blue-200');
                        btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                    }
                });
                if(templateType === 'blank'){
                    this.classList.add('bg-blue-100', 'text-blue-700', 'hover:bg-blue-200');
                    this.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                } else {
                    this.classList.add('bg-blue-500', 'text-white', 'border-blue-500');
                    this.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                }
            });
        });

        // Hàm áp dụng template vào vùng soạn thảo
        function applyTemplate(templateType) {
            let templateHTML = '<p>Bắt đầu ghi chú của bạn ở đây...</p>'; // Mặc định là trang trống
            if (templateType === 'cornell') {
                templateHTML = `
                    <table style="width:100%; border-collapse: collapse; border: 1px solid #ccc;">
                        <tbody>
                            <tr>
                                <td style="width:70%; padding:8px; vertical-align:top; border: 1px solid #ccc;"><strong>Ghi chú chính (Notes)</strong><br><br><br><br><br><p>&nbsp;</p></td>
                                <td style="width:30%; padding:8px; vertical-align:top; border: 1px solid #ccc;"><strong>Từ khóa/Câu hỏi (Cues)</strong><br><br><p>&nbsp;</p></td>
                            </tr>
                            <tr>
                                <td colspan="2" style="padding:8px; vertical-align:top; border: 1px solid #ccc;"><strong>Tóm tắt (Summary)</strong><br><br><br><p>&nbsp;</p></td>
                            </tr>
                        </tbody>
                    </table>
                    <p>&nbsp;</p> `;
            } else if (templateType === 'outline') {
                templateHTML = `
                    <h2><strong>Chủ đề chính</strong></h2>
                    <ul>
                        <li>Điểm chính 1
                            <ul>
                                <li>Chi tiết phụ a</li>
                                <li>Chi tiết phụ b</li>
                            </ul>
                        </li>
                        <li>Điểm chính 2</li>
                    </ul>
                     <p>&nbsp;</p>
                `;
            } else if (templateType === 'charting') {
                 templateHTML = `
                    <table style="width:100%; border-collapse: collapse; border: 1px solid #ccc;">
                        <thead>
                            <tr>
                                <th style="padding:8px; border: 1px solid #ccc; background-color: #f0f0f0;">Khái niệm</th>
                                <th style="padding:8px; border: 1px solid #ccc; background-color: #f0f0f0;">Định nghĩa</th>
                                <th style="padding:8px; border: 1px solid #ccc; background-color: #f0f0f0;">Ví dụ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding:8px; border: 1px solid #ccc;"><p>&nbsp;</p></td>
                                <td style="padding:8px; border: 1px solid #ccc;"><p>&nbsp;</p></td>
                                <td style="padding:8px; border: 1px solid #ccc;"><p>&nbsp;</p></td>
                            </tr>
                            <tr>
                                <td style="padding:8px; border: 1px solid #ccc;"><p>&nbsp;</p></td>
                                <td style="padding:8px; border: 1px solid #ccc;"><p>&nbsp;</p></td>
                                <td style="padding:8px; border: 1px solid #ccc;"><p>&nbsp;</p></td>
                            </tr>
                        </tbody>
                    </table>
                     <p>&nbsp;</p>
                `;
            }
            noteContentArea.innerHTML = templateHTML;
            noteContentArea.focus(); // Đặt focus vào vùng soạn thảo sau khi áp dụng template
        }
        // Cập nhật năm hiện tại ở footer
        document.getElementById('current-year-footer').textContent = new Date().getFullYear();
    </script>
</body>
</html>
>>>>>>> test1
